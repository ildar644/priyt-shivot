{% load static %}
<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–°—á–∞—Å—Ç–ª–∏–≤—ã–µ –∏—Å—Ç–æ—Ä–∏–∏ - –ü–∏—Ç–æ–º—Ü—ã –∏–∑ –ø—Ä–∏—é—Ç–∞</title>
    <link rel="stylesheet" href="{% static 'css/main.css' %}">
</head>
<body>
    <div class="container">
        {% include 'includes/nav.html' %}

        <div class="header">
            <h1>üòä –°—á–∞—Å—Ç–ª–∏–≤—ã–µ –∏—Å—Ç–æ—Ä–∏–∏</h1>
            <p>–ù–∞—à–∏ –ø–∏—Ç–æ–º—Ü—ã, –∫–æ—Ç–æ—Ä—ã–µ —É–∂–µ –Ω–∞—à–ª–∏ –ª—é–±—è—â–∏–µ —Å–µ–º—å–∏</p>
        </div>

        {% if stories %}
            <div class="pets-grid">
                {% for story in stories %}
                    <div class="pet-card">
                        <a href="{% url 'happy_story_detail' story.pk %}">
                            {% if story.photo_after %}
                                <img src="{{ story.photo_after.url }}" alt="{{ story.pet.name }}">
                            {% elif story.pet.photo %}
                                <img src="{{ story.pet.photo.url }}" alt="{{ story.pet.name }}">
                            {% else %}
                                <div class="no-photo">
                                    <span>üì∑ –§–æ—Ç–æ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç</span>
                                </div>
                            {% endif %}
                            
                            <h3>{{ story.pet.name }}</h3>
                            <div class="pet-info">
                                <strong>–ù–æ–≤—ã–π –¥–æ–º:</strong> <span>{{ story.new_owner_name }}</span>
                            </div>
                            <div class="pet-info">
                                <strong>–î–∞—Ç–∞ —É—Å—ã–Ω–æ–≤–ª–µ–Ω–∏—è:</strong> <span>{{ story.adoption_date|date:"d.m.Y" }}</span>
                            </div>
                            <div class="pet-info">
                                <strong>–ò—Å—Ç–æ—Ä–∏—è:</strong> <span>{{ story.title }}</span>
                            </div>
                        </a>
                    </div>
                {% endfor %}
            </div>
            
            <!-- –ü–∞–≥–∏–Ω–∞—Ü–∏—è -->
            {% if is_paginated %}
                <div class="pagination">
                    {% if page_obj.has_previous %}
                        <a href="?page={{ page_obj.previous_page_number }}" class="back-btn">‚Üê –ü—Ä–µ–¥—ã–¥—É—â–∞—è</a>
                    {% endif %}
                    
                    <span class="current-page">
                        –°—Ç—Ä–∞–Ω–∏—Ü–∞ {{ page_obj.number }} –∏–∑ {{ page_obj.paginator.num_pages }}
                    </span>
                    
                    {% if page_obj.has_next %}
                        <a href="?page={{ page_obj.next_page_number }}" class="back-btn">–°–ª–µ–¥—É—é—â–∞—è ‚Üí</a>
                    {% endif %}
                </div>
            {% endif %}
        {% else %}
            <div class="no-pets">
                <h2>–ü–æ–∫–∞ –Ω–µ—Ç –æ–ø—É–±–ª–∏–∫–æ–≤–∞–Ω–Ω—ã—Ö –∏—Å—Ç–æ—Ä–∏–π</h2>
                <p>–°–∫–æ—Ä–æ –∑–¥–µ—Å—å –ø–æ—è–≤—è—Ç—Å—è —Ä–∞—Å—Å–∫–∞–∑—ã –æ –Ω–∞—à–∏—Ö –ø–∏—Ç–æ–º—Ü–∞—Ö, –∫–æ—Ç–æ—Ä—ã–µ –Ω–∞—à–ª–∏ –¥–æ–º!</p>
            </div>
        {% endif %}
    </div>
</body>
</html>
