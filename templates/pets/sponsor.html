{% load static %}
<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ü–æ–º–æ—á—å {{ pet.name }} - –í–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–ø–µ–∫—É–Ω—Å—Ç–≤–æ</title>
    <link rel="stylesheet" href="{% static 'css/main.css' %}">

</head>
<body>
    <div class="container">
        {% include 'includes/nav.html' %}

        <div class="pet-detail-container">
            <a href="{% url 'pet_detail' pet.pk %}" class="back-btn">‚Üê –ù–∞–∑–∞–¥ –∫ {{ pet.name }}</a>
            
            <div class="header">
                <h1>üíù –ü–æ–º–æ—á—å {{ pet.name }}</h1>
                <p>–°—Ç–∞–Ω—å—Ç–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã–º –æ–ø–µ–∫—É–Ω–æ–º –∏ –ø–æ–¥–¥–µ—Ä–∂–∏—Ç–µ –Ω–∞—à–µ–≥–æ –ø–∏—Ç–æ–º—Ü–∞</p>
            </div>

            <div class="pet-header">
                <div class="pet-photo">
                    {% if pet.photo %}
                        <img src="{{ pet.photo.url }}" alt="{{ pet.name }}">
                    {% else %}
                        <div class="no-photo">
                            <span>üì∑ –§–æ—Ç–æ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç</span>
                        </div>
                    {% endif %}
                </div>
                
                <div class="pet-basic-info">
                    <h2>{{ pet.name }}</h2>
                    <div class="info-item">
                        <span class="info-label">–¢–∏–ø:</span>
                        <span class="info-value">{{ pet.pet_type.name }}</span>
                    </div>
                    <div class="info-item">
                        <span class="info-label">–í–æ–∑—Ä–∞—Å—Ç:</span>
                        <span class="info-value">{{ pet.age_in_years }}</span>
                    </div>
                    <div class="info-item">
                        <span class="info-label">–ü—Ä–∏—é—Ç:</span>
                        <span class="info-value">{{ pet.shelter.name }}</span>
                    </div>
                </div>
            </div>

            <form method="post" class="sponsor-form">
                {% csrf_token %}
                
                <h3>–í—ã–±–µ—Ä–∏—Ç–µ —Ç–∏–ø –ø–æ–º–æ—â–∏:</h3>
                <div class="sponsor-options">
                    <div class="sponsor-option" data-type="food">
                        <h4>üçñ –ö–æ—Ä–º</h4>
                        <p>–ö–∞—á–µ—Å—Ç–≤–µ–Ω–Ω–æ–µ –ø–∏—Ç–∞–Ω–∏–µ –¥–ª—è –∑–¥–æ—Ä–æ–≤—å—è</p>
                    </div>
                    <div class="sponsor-option" data-type="medical">
                        <h4>üíä –õ–µ—á–µ–Ω–∏–µ</h4>
                        <p>–í–µ—Ç–µ—Ä–∏–Ω–∞—Ä–Ω–∞—è –ø–æ–º–æ—â—å –∏ –ª–µ–∫–∞—Ä—Å—Ç–≤–∞</p>
                    </div>
                    <div class="sponsor-option" data-type="toys">
                        <h4>üéæ –ò–≥—Ä—É—à–∫–∏</h4>
                        <p>–†–∞–∑–≤–ª–µ—á–µ–Ω–∏—è –∏ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å</p>
                    </div>
                    <div class="sponsor-option" data-type="general">
                        <h4>‚ù§Ô∏è –û–±—â–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞</h4>
                        <p>–ü–æ–º–æ—â—å –≤ —Å–æ–¥–µ—Ä–∂–∞–Ω–∏–∏</p>
                    </div>
                </div>
                
                <input type="hidden" name="sponsorship_type" id="sponsorship_type" required>
                
                <div class="form-group">
                    <label for="amount">–°—É–º–º–∞ –ø–æ–º–æ—â–∏ (—Ä—É–±.):</label>
                    <div class="amount-presets">
                        <button type="button" class="amount-preset" data-amount="500">500</button>
                        <button type="button" class="amount-preset" data-amount="1000">1000</button>
                        <button type="button" class="amount-preset" data-amount="2000">2000</button>
                        <button type="button" class="amount-preset" data-amount="5000">5000</button>
                    </div>
                    <input type="number" name="amount" id="amount" min="100" step="50" required>
                </div>
                
                <div class="form-group">
                    <label for="message">–°–æ–æ–±—â–µ–Ω–∏–µ –¥–ª—è {{ pet.name }} (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ):</label>
                    <textarea name="message" id="message" rows="4" placeholder="–ù–∞–ø–∏—à–∏—Ç–µ —á—Ç–æ-–Ω–∏–±—É–¥—å –ø—Ä–∏—è—Ç–Ω–æ–µ –¥–ª—è –Ω–∞—à–µ–≥–æ –ø–∏—Ç–æ–º—Ü–∞..."></textarea>
                </div>
                
                <button type="submit" class="submit-btn">üíù –ü–æ–º–æ—á—å {{ pet.name }}</button>
            </form>
        </div>
    </div>

    <script>
        // –í—ã–±–æ—Ä —Ç–∏–ø–∞ —Å–ø–æ–Ω—Å–æ—Ä—Å—Ç–≤–∞
        const sponsorOptions = document.querySelectorAll('.sponsor-option');
        const sponsorshipTypeInput = document.getElementById('sponsorship_type');
        
        sponsorOptions.forEach(option => {
            option.addEventListener('click', function() {
                sponsorOptions.forEach(opt => opt.classList.remove('selected'));
                this.classList.add('selected');
                sponsorshipTypeInput.value = this.dataset.type;
            });
        });
        
        // –ü—Ä–µ–¥—É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ —Å—É–º–º—ã
        const amountPresets = document.querySelectorAll('.amount-preset');
        const amountInput = document.getElementById('amount');
        
        amountPresets.forEach(preset => {
            preset.addEventListener('click', function() {
                amountInput.value = this.dataset.amount;
            });
        });
        
        // –í–∞–ª–∏–¥–∞—Ü–∏—è —Ñ–æ—Ä–º—ã
        document.querySelector('.sponsor-form').addEventListener('submit', function(e) {
            if (!sponsorshipTypeInput.value) {
                e.preventDefault();
                alert('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤—ã–±–µ—Ä–∏—Ç–µ —Ç–∏–ø –ø–æ–º–æ—â–∏');
                return;
            }
            
            if (!amountInput.value || amountInput.value < 100) {
                e.preventDefault();
                alert('–ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —Å—É–º–º–∞ –ø–æ–º–æ—â–∏ - 100 —Ä—É–±–ª–µ–π');
                return;
            }
        });
    </script>
</body>
</html>
